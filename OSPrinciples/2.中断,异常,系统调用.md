# 中断、异常与系统调用

---

### 中断

- 中断流程

  1. 硬件（外设、CPU）

     > 中断的产生首先由硬件开始，硬件负责设置中断标记，然后CPU检测到标记后会找到对应的中断号，最后CPU将中断号发送给操作系统进行后续操作。

     1. 将内部、外部事件设置中断标记
     2. 中断事件的ID

  2. 软件（操作系统）

     > 操作系统接收到中断号时首先先保存当前处理状态（寄存器状态等等），保存后操作系统根据中断号找到中断号对应的中断处理程序的地址并跳转执行，执行完后清除中断标记并恢复之前保存的处理状态。

     1. 保存当前处理状态
     2. 中断服务程序处理
     3. 清除中断标记
     4. 恢复之前保存的处理状态