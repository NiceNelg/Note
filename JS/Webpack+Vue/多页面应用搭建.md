# 多页面应用搭建

---

- 基础项目搭建

  1. npm i vue-cli --global
  2. cd `项目名`
  3. vue init webpack `项目名`
  4. npm i

- 多页面构建

  1. 添加入口文件

     > 打开`/build/webpack.base.conf.js`，在`module.exports`字段里，找到`entry`字段，在那里配置添加多个入口：

     ```javascript
     entry: {
       app: './src/main.js',
       one: './src/js/one.js',
       two: './src/js/two.js'
     },
     ```

  2. 开发环境添加编译文件路径

     > 打开`/build/webpack.dev.conf.js`文件，在`module.exports`那里找到`plugins`字段里添加：

     ```javascript
     plugins: [
       ....
       // https://github.com/ampedandwired/html-webpack-plugin
       new HtmlWebpackPlugin({
         filename: 'index.html',
         template: 'index.html',
         inject: true,
         chunks: ['app']
       }),
       new HtmlWebpackPlugin({
         filename: 'one.html',
         template: 'one.html',
         inject: true,
         chunks: ['one']
       }),
       new HtmlWebpackPlugin({
         filename: 'two.html',
         template: 'two.html',
         inject: true,
         chunks: ['two']
       }),
       ....
     ]
     ```

     > 在chunks那里的app指的是webpack.base.conf.js的entry那里与之对应的变量名。chunks的作用是每次编译、运行时每一个入口都会对应一个entry，如果没写则引入所有页面的资源。

  3. 正式环境添加编译文件路径

     > 打开`/build/webpack.prod/conf.js`文件，在`plugins`字段里找到`HTMLWebpackPlugin`字段，然后添加如下代码：

     ```javascript
     new HtmlWebpackPlugin({
       filename: process.env.NODE_ENV === 'testing'
         ? 'index.html'
         : config.build.index,
       template: 'index.html',
       inject: true,
       minify: {
         removeComments: true,
         collapseWhitespace: true,
         removeAttributeQuotes: true
         // more options:
         // https://github.com/kangax/html-minifier#options-quick-reference
       },
       // necessary to consistently work with multiple chunks via CommonsChunkPlugin
       chunksSortMode: 'dependency',
       chunks: ['manifest', 'vendor', 'app']
     }),
     new HtmlWebpackPlugin({
       filename: config.build.one,
       template: 'one.html',
       inject: true,
       minify: {
         removeComments: true,
         collapseWhitespace: true,
         removeAttributeQuotes: true
       },
       chunksSortMode: 'dependency',
       chunks: ['manifest', 'vendor', 'one']
     }),
     new HtmlWebpackPlugin({
       filename: config.build.two,
       template: 'two.html',
       inject: true,
       minify: {
         removeComments: true,
         collapseWhitespace: true,
         removeAttributeQuotes: true
       },
       chunksSortMode: 'dependency',
       chunks: ['manifest', 'vendor', 'two']
     }),
     ```

     > 其中filename引用的是\config\index.js里的build，每个页面都要配置一个chunks，不然会加载所有页面的资源。

  4. 对编译环境进行配置

     > 先打开`/config/index.js`文件，在`build`字段里加入：

     ```javascript
     index: path.resolve(__dirname, '../dist/index.html'),
     one: path.resolve(__dirname, '../dist/one.html'),
     two: path.resolve(__dirname, '../dist/two.html'),
     ```

> 参考博文：https://blog.csdn.net/Tank_in_the_street/article/details/73732801